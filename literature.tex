\setlength{\footskip}{8mm}

\chapter{Literature Review} 
\label{ch:literature-review}

\textit{This chapter begins with a review of the functional architecture of autonomous driving systems, coordinate systems, the PixHawk, and ROS coordinate conventions.} 

\section{Software Architecture of Autonomous Driving Vehicles}
\label{section-name-in-literature-review}

\shortciteA{sbehere16t} splits the major components of the motion control part of autonomous driving systems into three main categories as shown in Figure \ref{fig:fav_automonous}. These categories are

\begin{itemize}
	\item Perception of the external environment in which the vehicle operates
	\item Decision making and control of vehicle motion with respect to the external environment that is perceived
	\item Vehicle platform manipulation, which deals mostly with sensing, control, and actuation of the vehicle, with the intention of achieving the desired motion.
\end {itemize}

Each category can be further broken down into several components. I describe each component in more details in the following sections.

\subsection{Perception}

Sensing components sense the state of the vehicle and the state of the environment in which the vehicle operates. The sensor fusion component considers multiple sources of information to construct a hypothesis or belief about the state of the environment. The localization component determines the location of the vehicle with respect to a global map. The semantic understanding component processes the sensor input and derives meaningful information from it. The world model component holds the current estimate of the state of the external environment.

\subsection{Decision and Control}
The trajectory generation component repeatedly generates a set of obstacle-free trajectories in the world coordinate system and picks an optimal trajectory from the set. Energy management components deal with energy management of the vehicle. Diagnosis and fault management monitors the state of the overall system and its components. Reactive control components are used for immediate responses to unanticipated stimuli from the environment. The vehicle platform abstraction component refers to a minimal model of the vehicle platform. 

\subsection{Vehicle Platform Manipulation}

The platform stabilization component's task is to keep the vehicle platform in a controllable state during operation. Trajectory execution components are responsible for executing the trajectory generated by the decision and control component. 

\begin{figure}
	\centering
	\includegraphics[width=5in]{figures/literature/fav_autonomous_driving}
	\caption[FAV of Antonomous Driving System.]{\small 
		Functional architecture of an autonomous driving system. Reprinted from Behere (2016). }
	\label{fig:fav_automonous}
\end{figure}

\section{Coordinate Systems}

In this section I describe the different coordinate system conventions in use in robotic applications. 
	
\subsection{Earth Centric, Earth Fixed}

The earth-centered earth-fixed (ECEF) coordinate system, rotates with the Earth and has its origin at the center of the Earth. Refer to Figure~\ref{fig:coordinatesystem} (a) for a visualization. ECEF follows the right handed coordinate system convention. \shortciteA{coordinatesystem} describes ECEF as follows.

\begin{itemize}
	\item The origin is at the center of mass of the Earth, a point close to the Earth's center.
	\item The Z axis is on the line between the magnetic north and south poles, with positive values increasing northward (but not exactly coinciding with the Earth's rotational axis).
	\item The X and Y axes lie in the plane of the equator.
	\item The X axis passes through the point on the equator from 180 degrees longitude (negative) to the prime meridian (0 degrees longitude, positive).
	\item The Y axis passes through the point at 90 degrees west longitude along the equator (negative) to 90 degrees east along the equator (positive).
\end{itemize}

\subsection{World Geodetic System}
The World Geodetic System is a standard system used in GPS, cartography and geodesy. The latest revision is WGS 1984 (WGS 84) that was established and is maintained by the United States National Geospatial-Intelligence Agency. It was last revised in 2004. The World Geodetic System 1984 (WGS 84) is one of the best global geodetic reference system for the Earth available presently. The datum (ellipsoid) defined by WGS 84 is generally used to convert the GPS latitutes and longitude to the UTM coordinate system.

\subsection{Universal Transverse Mercator Geopraphic Coordinate System}
The Universal Transverse Mercator (UTM) is a coordinate system that divided the earth into 60 zones. Each zone is a plane with its own x and y coordinates in meters. It ignores altitude and treats the earth as a perfect ellipsiod. A UTM coordinate has:

\begin{itemize}
        \item A zone number.
        \item A hemisphere (N/S).
        \item An easting (X coordinate).
        \item A northing (Y coordinate)
\end{itemize}

A coordinate 14.08057584 \degree N, 100.61284553 \degree E in latitude and longitude is represented as 47 N 674132 1557234 in UTM.

\subsection{Local tangent plane}

In the local tangent plane coordinate system, a position on the earth is fixed about the origin. There are two conventions as shown in Figure~\ref{fig:coordinatesystem} (b).

\begin{itemize}
	\item X=East, Y=North, Z=Up (ENU).
	\item X=North, Y=East, Z=Down (NED), which is commonly used in aviation, as the objects of interest usually lie before an aircraft (down or positive Z).
\end{itemize}

\begin{figure}%
	\centering
	\subfloat []{{\includegraphics[width=3in]{figures/literature/ECEF}}}%
	\subfloat []{{\includegraphics[width=3in]{figures/literature/ENU_NED}}}%
	\caption[ECEF coordinate system]{\small Coordinate systems. (a) Earth centric, earth fixed (ECEF) coordinate system. (b) Local tangent plane coordinate systems. Reprinted from Krishnavedala. 
	}%
	\label{fig:coordinatesystem}%
\end{figure}

\subsection{PixHawk and ROS coordinate systems}

PixHawk follows the NED convention, whereas ROS follows the ENU convention. The conversion between these different conventions is handled automatically by MAVROS. To translate air-frame related data, a rotation of $180^{\circ}$ degrees is applied about the roll (X) axis. For local data, a $180^{\circ}$ rotation is applied about the roll (X) and $90^{\circ}$ rotation is applied about the yaw (Z) axes.

It is good practice in ROS to set up reference frames as described by \shortciteA{rosrefframes}, shown in Figure \ref{fig:rosrefframes}.

\begin{itemize}
	\item The coordinate frame called base\_link is rigidly attached to the mobile robot base. It can be attached in any arbitrary position or orientation.
	\item The coordinate frame called odom is a world-fixed frame. The pose of a robot is continuous in this frame, but it can drift over time.
	\item The coordinate frame called map is a world fixed frame, with Z-axis pointing upwards. 
	\item The coordinate frame called earth is the origin of the ECEF frame.
\end{itemize}

\begin{figure}
	\centering
	\includegraphics[width=5in]{figures/literature/ros_rel_frames}
	\caption[Relation between ROS frames]{\small 
	Relationship between ROS frames. Reprinted from \shortciteA{rosrefframes}. }
	\label{fig:rosrefframes}
\end{figure}

\section{Wireless Mesh Network}

A wireless mesh network's (WMN) consists of two types of nodes, mesh routers and mesh clients. Mesh routers form the mesh backbone for mesh clients. Every node in the mesh has the capability to route packets forward for other nodes if the packet destination is not in direct wireless transmission range. Mesh routers provide functionality as bridge/gateway that enables the WMN to integrate with other networks such as cellular, ad-hoc and ethernet. In a wireless mesh network, all the participating nodes automatically establish and maintain mesh connectivity and are in effect dynamically self-organized and self-configured. WMN can be rapidly deployed where there is no network coverage and has the potential for application in disaster management.

\subsection{WMN Network Architecture}

A wireless mesh network has two types of nodes, mesh routers and mesh clients. Mesh routers can have multiple networking interfaces to provide bridge/gateway functionality to the mesh network and have additional routing functions to support mesh networking. Mesh routers can be built on similar hardware platform as a conventional wireless router. Mesh routers can be build based upon embedded systems and general-purpose computer systems. Mesh clients have capability for mesh networking and can also work as a mesh router, nevertheless they lack bridge/gateway function and usually have only one wireless interface.


The architecture of WMNs can be classified into three types based upon the composition of mesh routers and clients.

\begin{itemize}
	\item \textit{Infrastructure/Backbone WMNs.}
	In this architecture mesh routers form an infrastructure for clients that connect to them. The mesh routers automatically establish and maintain links between themselves and provide gateway functionality to connect the mesh network to other networks and the internet. 
	
	\item \textit{Client WMNs.} In this architecture, mesh routers are not required for maintaining a mesh network. Mesh clients provide peer-to-peer networking, performing routing and configuration management. A packet may reach the destination node through multiples hops through client nodes.
	  
	\item \textit{Hybrid WMNs.} In this architecture, mesh routers provide infrastructure backbone with access to other networks. Client nodes can connect to the mesh network through meshing with other clients, as well as through mesh routers. This in effect, is a combination of infrastructure and client WMNs, and provides increased connectivity and coverage.
\end{itemize}

\subsection{Features of WMNs}

WMNs have redundant nodes and can provide high level of fault tolerance and robustness. If the case of link failure, the mesh network can adapt and reroute the data. Using multi-hop strategies, the coverage range can be increased, as intermediate router and clients can relay packets between hosts which do not have a direct line of sight. WMNs can be rapidly deployed with less maintenance because of self-forming, self-healing and self-organization capability. They are compatible with ad-hoc wireless clients.


\subsection{Routing Protocols for WMNs}

WMNs has redundant and mobile clients, hence, the routing protocols should find and maintain routes between the source and destination nodes by detecting and responding to changes in network topology. Ideally routing protocols should maximize the capacity of the network and minimize the packet delivery delays by creating and selecting efficient routes between nodes.

Wireless mesh routing protocols can be classified into three categories:

\begin{itemize}
	\item \textit{Proactive Routing Protocol.} Proactive routing protocols build and maintain the routing table by sharing routing data among nodes at periodic intervals. It selects the route from the routing table while forwarding packets from one node to the other. Optimized Link State Routing Protocol (OLSR) and Better Approach to Mobile Ad-hoc Networks (BATMAN) falls under this category.
	\item \textit{Reactive Routing Protocol.}  Reactive routing protocols searches the route from source to destination node on demand as it is required. Examples of this category are Ad Hoc On-Demand Distance Vector Protocol (AODV) and Dynamic Source Routing Protocol (DSR).
	\item \textit{Hybrid Routing Protocol.} Hybrid Routing Protocol uses both reactive and proactive routing strategies depending upon the environment. As a reactive routing protocol, it will provide the path on demand, based on up-to-date information. Examples of hybrid routing protocols are ZRP (zone routing protocol), HSLS (hazy sighted link state routing protocol).
\end{itemize}

\subsubsection{Comparision of Routing Protocols}

\shortciteA{Mbarushimana2007} does a comparative study between the performance of reactive (AODV and DSR) and proactive (OSLR) protocols. They run simulations for 1000 seconds, considering four different scenerios, namely, workload, number of flows, number of nodes in the network, and node movement speed. The performance of the three routing protocols is measured based on throughput, goodput, routing load and end-to-end delay. They come to the conclusion that OSLR shows the best performance in terms of data delivery ratio and end-to-end delay, and provide insight that network layer tends to drop more packets while reactive protocol is computing the route to the destination. In their study OSLR still outperforms the reactive routing protocols at higher speeds even though it has the highest routing overhead due to its exchange of periodic routing updates.

\shortciteA{Kulla2012} does a performance comparison of OSLR and BATMAN routing protocols in an indoor stairs environment of 5 floor building. They come to the conclusion that both the protocols perform well for one-hop and two-hop communication. The delay and packet loss increased after three hops for static node scenario and after two hops for moving node scenario. BATMAN performs better than OSLR for packet loss metrics because BATMAN buffers packets when routes are unstable. In general, OSLR protocol showed better performance than BATMAN protocol. OSLR shows better performance than BATMAN regarding the delay metrics, which is critical for realtime communication between a cluster of drones.

From these studies of performance comparisons OSLR seems to be the most suited to my use case, as:
\begin{itemize}
	\item Proactive protocols (OSLR) performs better than reactive protocols in terms of data delivery ratio and end-to-end delay.
	\item Reactive protocols tends to drop packets while they are computing the route.
	\item OSLR shows better performance than BATMAN for delay metrics.
	\item Latest information about the drones in the mesh network is more critical than stale information, which means OSLR with less delay is more suited to the use case of my study.
\end{itemize}

\subsection{Optimized Link State Routing Protocol}

Optimized Link State Routing Protocol (OSLR) belongs to the class of link state routing protocol, with optimization for mobile ad hoc networks.  It is a distributed protocol with no central agency that exchanges topology information with other node of the network periodically. Each node maintains a routing table, and is a proactive protocol. When data is to be sent, it refers to the routing table. The route to other nodes are maintained by each node proactively. 

HELLO message is used for link sensing, neighbor detection, and MPR selection. HELLO messages are not forwarded by the nodes. The nodes in OSLR use only selected nodes called multipoint relay (MPR) to re-transmit control messages, reducing overhead from control messages flooding the network. Each node in the network selects a set of nodes in its symmetric 1-hop neighborhood called MPR set of that node. Neighbors which do not belong to MPR set of the node receive and process broadcast messages but do not re-transmit it. If an interface of a node has at least one verified bi-directional link with an interface of another node, it is considered as its symmetric 1-hop neighbor. 

Topology Control (TC) message is used to disseminated topology information through the network, using optimized flooding through MPR mechanism. The TC messages distributed to each node is used to calculate routing table in each node.

If a node has multiple interfaces, it must announce, periodically, information describing its interface configuration to other nodes in the network. Multiple Interface Declaration (MID) message is flooded by such nodes using MPR mechanism in the network, and is used for routing table calculations.

Gateway/bridge nodes have non OSLR interfaces connected to external network such as the ethernet. Host and Network Association (HNA) message are periodically broadcasted by such nodes to register such routing information in the routing table.


The role of OSLR is not to forward data packets. It maintains the routing table in each node which is used by the system to perform network layer forwarding function.

\subsection{FANET}

Flying ad hoc network (FANET) is a specialized subset of mobile ad hoc network(MANET). FANET takes into consideration the challanges faced by MANET with flying UAVs as the mesh nodes. FANET can also be classified as a subset of Vehicular ad hoc network (VANET), where the mesh nodes are vehicles on the ground. The relation between MANET, VANET and FANET is given in figure \ref{fig:manet-vanet-and-fanet}.

\begin{figure}
	\centering
	\includegraphics[width=5in]{figures/literature/MANET-VANET-and-FANET}
	\caption[MANET, VANET and FANET]{\small 
		MANET, VANET,and FANET Reprinted from \shortciteA{Tareque2015}. }
	\label{fig:manet-vanet-and-fanet}
\end{figure}

Surveys of FANET has been carried out by \shortciteA{Chriki2019} and \shortciteA{Tareque2015}. The challenges of FANET described can be summarized as follows:

\begin{itemize}
	\item \textit{Network topology change.} In FANET, rapidly moving UAVs changes the network topology more frequently.
	\item \textit{Node mobility.} UAVs have a higher degree of mobility than vehicles or people on ground. Node mobility issues can be considered as the most significant difference between FANET and other ad hoc networks.
	\item \textit{Node density.} Node density in FANET is lower than other MANETs. FANET nodes are spread across the sky. There are less number of average nodes in a unit area in FANET. 
	\item \textit{Radio propagation model.} MANET and VANET nodes are close to the ground and because of the environment, they may not have direct line of sight. FANET nodes are in the sky and for most cases have direct line of sight between the nodes.
	\item \textit{Power Consumption.} For large UAVs power consumption is not a significant factor when designing the FANET. However for small UAVs the power consumed by FANET must be taken into consideration.  
	\item \textit{Localization.} UAVs because of its higher mobility degree may have inaccurate GPS position information as compared to other MANETs.	
\end{itemize}

Routing protocols for FANET follows similar classfication as WMNs and are as follows:

\begin{itemize} 
	\item \textit{Static protocols.} These protocols have fixed routing tables.
	\item \textit{Proactive protocols.} Updates the routing tables periodically.
	\item \textit{Reactive protocols.} Finds path to the destination node when data needs to be sent.
	\item \textit{Hybrid protocols.}  These use both reactive and proactive strategies when required. 
	\item \textit{Geographic based protocols.} These protocols use position information.
\end{itemize}

There are multiple optimization and extensions for OSLR specifically done to solve challenges for FANET. Some of them are:

\begin{itemize}
	\item \textit{DOLSR.} \shortciteA{Alshabtat2011} proposes Directional Optimized Link State Routing Protocol (DOLSR) which uses directional antenna and heuristic to minimize the number of MPRs. They show reduced end-to-end delay and enhanced overall throughout using DOLSR for FANET.
	\item \textit{P-OSLR.} \shortciteA{Rosati2013} proposes Predictive OSLR (P-OSLR) that uses GPS information to help the routing protocol. It take the relative speed between the nodes in account to calculated expected transmission count (ETX) metric. This metric is used by OSLR for link quality sensing. The show increased multi-hop reliability with minimum outage time as compared to OSLR in FANET environment.
	\item \textit{ML-OSLR.} \shortciteA{Zheng2014} proposes Mobility and Load aware OSLR (ML-OSLR) that introduces mobility and load aware algorithm in the routing protocol. ML-OLSR does not select high speed nodes as the MPR and avoid routing through high load, congested and high speed nodes to increase network stability. They show increased performance in packet delivery ratio and average end-to-end delay compared to OSLR with FANET based simulation.
\end{itemize}

\shortciteA{Singh2015} presents the application of OSLR to FANET under different mobility model of the nodes through simulation. He shows that the increase in speed of nodes decreases throughout, increases end to end delay and decreases packet delivery ratio for most mobility model. However for my study, the speed of the node are relatively low, and nodes spend most of their time waiting for other nodes to arrive to their waypoint and take picture, therefore I shall purse the use of generic OSLR for this thesis.


\section{Simulators}

An approximate imitation of a process or system's operation over time is known as simulation. A real-life or hypothetical situation modeled on a computer ro I how the system works is a computer simulation. Computer simulation can be a powerful tool to develop, investigate the behavior and save cost, by providing a means to virtually access the system under study.

Some of the classification of simulations are:
\begin{itemize}
	\item \textit{Continuous simulation.} Simulation is based on continuous time and uses numerical integration of differential equations.
	\item \textit{Discrete-event simulation.} Simulation is based on discrete time intervals. The state of the components of the simulation change their value only at discrete time. 
	\item \textit{Stochastic simulation.} Simulation with same input will produce different results within some confidence interval. During simulation some variables or process is subject to random variations.
	\item \textit{Deterministic simulation.} Simulation with same input will always produce the same deterministic results. The variables and process are regulated by deterministic algorithms. 
\end{itemize}

\subsection{Computer Network Simulators}

\subsection{Robotics Simulator}


\FloatBarrier

